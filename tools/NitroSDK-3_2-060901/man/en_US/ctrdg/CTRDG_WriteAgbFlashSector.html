<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>CTRDG_Read</TITLE>
<LINK rel="stylesheet" href="../css/nitro.css" type="text/css">
</HEAD>
<BODY>
<H1 align="left">CTRDG_WriteAgbFlashSector</H1>
<H2>C Specification</H2>
<DL>
  <DD>
<PRE><CODE>#include &lt;nitro/ctrdg.h&gt;</CODE></PRE>
<PRE><CODE>u16 CTRDG_WriteAgbFlashSector(u16 sec_num, u8* src);
  </CODE></PRE>
<PRE>Corresponding AGB function: <A href="coordinate.html"><CODE>u16 (*ProgramFlashSector)(u16 secNo,u8 *src)</CODE></A></PRE>
</DL>
<H2>Arguments</H2>
<TABLE border="1">
  <TBODY>
    <TR>
<TD><B><I>sec_num</I></B></TD>
<TD>The destination flash sector number.</TD>
    </TR>
    <TR>
<TD><B><I>src</I></B></TD>
<TD>Writes the source address.</TD>
    </TR>
  </TBODY>
</TABLE>
<H2>Return Values</H2>
<P>Returns 0 if the write succeeds. Returns a non-zero value if it fails.</P>
<H2>Description</H2>
<P>This function writes one sector (4 Kbytes) of data beginning from the address given by <CODE>src</CODE> into the target sector number. <CODE>CTRDG_EraseAgbFlashSector</CODE> is called inside this routine and data is written after the sector is erased. This function returns an error if the target sector number is out of range. You can find out how many bytes remain available while this routine is executing by accessing the global variable <CODE>flash_remainder</CODE>.</P>
<P>The access cycle setting does not need to be set beforehand because it is created inside the function. In addition, the <CODE><A href="../os/time/OS_InitTick.html">OS_InitTick</A></CODE> function must be called before this function because clock ticks are used by this function to measure timeouts.</P>
<P><B>Note: </B>All interrupts are disabled inside this function and the cartridge bus is locked for a set period. In particular, when this function is called, do not use DMA that starts automatically during direct sound and V/H blank synchronization, display synchronization, cartridge request, etc.</P>
<P>Note that the AGB backup device cannot be accessed normally with version IS-NITRO-DEBUGGER 1.66 or earlier.</P>
<H2>See Also</H2>
<P><CODE><A href="CTRDG_WriteAndVerifyAgbFlash.html">CTRDG_WriteAndVerifyAgbFlash</A>, <A href="CTRDG_WriteAgbFlashSectorAsync.html">CTRDG_WriteAgbFlashSectorAsync</A>, <A href="CTRDG_WriteAndVerifyAgbFlashAsync.html">CTRDG_WriteAndVerifyAgbFlashAsync</A><BR></CODE></P>
<H2>Revision History</H2>
<P>05/25/2006 Added a description that the AGB backup device cannot be accessed normally with version IS-NITRO-DEBUGGER 1.66 or earlier.<BR>04/07/2006 Initial version.</P>
<hr>
<P>CONFIDENTIAL</P>
</BODY>
</HTML>